
<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="Mark Otto, Jacob Thornton, and Bootstrap contributors">
    <meta name="generator" content="Jekyll v3.8.5">
    <title>VALENTINES DAY COLLECTION</title>

    <!-- <link rel="canonical" href="https://getbootstrap.com/docs/4.3/examples/starter-template/"> -->

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
    <script src="https://unpkg.com/aos@2.3.1/dist/aos.js"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Amatic+SC:wght@400;700&display=swap" rel="stylesheet">

    <script src="https://cdn.ethers.io/lib/ethers-5.0.umd.min.js" type="text/javascript"></script>
    <script src="https://cdn.jsdelivr.net/gh/ethereum/web3.js/dist/web3.min.js"></script>
  
    <!-- Custom styles for this template -->
    <link href="css/style.css" rel="stylesheet">
  </head>
  <body>
    <nav class="navbar navbar-expand-md mt-3">
  <a class="logo-header" href="#" data-aos="fade-down"><img src="./images/VALENTINES_LOGO_320x.png"></a>
  <!-- <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarsExampleDefault" aria-controls="navbarsExampleDefault" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarsExampleDefault">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active">
        <a class="nav-link" href="#">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="#">Link</a>
      </li>
      <li class="nav-item">
        <a class="nav-link disabled" href="#" tabindex="-1" aria-disabled="true">Disabled</a>
      </li>
      <li class="nav-item dropdown">
        <a class="nav-link dropdown-toggle" href="#" id="dropdown01" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">Dropdown</a>
        <div class="dropdown-menu" aria-labelledby="dropdown01">
          <a class="dropdown-item" href="#">FOO</a>
          <a class="dropdown-item" href="#">BAR</a>
          <a class="dropdown-item" href="#">BAZ</a>
        </div>
      </li>
    </ul>
  </div> -->
</nav>

<main role="main" class="container">

  <div class="wrapper">
    <h1 class="grobold center-item mt-5" data-aos="fade-down">COMING SOON</h1>
    <p class="p-font lead center-item mt-1" data-aos="flip-up" data-aos-delay="300">14.02.2022</p>

    <p class="p-font mt-5 collection-inner center-item" data-aos="zoom-in-up">COLLECT YOUR FREE PASS BELOW</p>
    
    <div class="mt-2 flex-center-vert" data-aos="zoom-in-up"><button id="mintMax" type="button" class="btn btn-mint big-btn grobold">MINT PASS</button></div>

    <h1 class="grobold center-item mt-5" data-aos="fade-up">ABOUT</h1>
    <p class="p-font center-item text-uppercase mt-3" data-aos="flip-up" data-aos-delay="300">Congrats on finding our top secret website! <br> Mint your free pass above. <br>Something special is coming. <br> Stay tuned.</p>
  </div>

</main><!-- /.container -->
<footer >
    <div class=" py-5 center-item" data-aos="fade-up">&copy; 2022 VALENTINES DAY NFT LLC</div>
</footer>
<script>
// You can also pass an optional settings object
// below listed default settings
AOS.init({
  // Global settings:
  disable: false, // accepts following values: 'phone', 'tablet', 'mobile', boolean, expression or function
  startEvent: 'DOMContentLoaded', // name of the event dispatched on the document, that AOS should initialize on
  initClassName: 'aos-init', // class applied after initialization
  animatedClassName: 'aos-animate', // class applied on animation
  useClassNames: false, // if true, will add content of `data-aos` as classes on scroll
  disableMutationObserver: false, // disables automatic mutations' detections (advanced)
  debounceDelay: 50, // the delay on debounce used while resizing window (advanced)
  throttleDelay: 99, // the delay on throttle used while scrolling the page (advanced)
  

  // Settings that can be overridden on per-element basis, by `data-aos-*` attributes:
  offset: 120, // offset (in px) from the original trigger point
  delay: 0, // values from 0 to 3000, with step 50ms
  duration: 1000, // values from 0 to 3000, with step 50ms
  easing: 'ease', // default easing for AOS animations
  once: false, // whether animation should happen only once - while scrolling down
  mirror: false, // whether elements should animate out while scrolling past them
  anchorPlacement: 'top-bottom', // defines which position of the element regarding to window should trigger the animation

});
</script>

<script>
    let currentAccount = null;
    let web3js;
    var contractABI;
    let contactAddress = '0xaae71bbbaa359be0d81d5cbc9b1e88a8b7c58a94'
    // web3 lib instance
    var web3 = new Web3(window.ethereum);
    var input_value;   
  
    function handleAccountsChanged(accounts) {
        console.log('Calling HandleChanged')
  
        if (accounts.length === 0) {
            console.log('Please connect to MetaMask.');
            $('#enableMetamask').html('Connect with Metamask')
        } else if (accounts[0] !== currentAccount) {
            currentAccount = accounts[0];
            $('#enableMetamask').html(currentAccount)
            $('#status').html('')          
            setTimeout(getMinted(), 1000);
            if(currentAccount != null) {
                // Set the button label
                $('#enableMetamask').html(currentAccount)
            }
        }
        console.log('WalletAddress in HandleAccountChanged ='+currentAccount)
    }
  
    function connect() {
        console.log('Calling connect()')
        ethereum
        .request({ method: 'eth_requestAccounts' })
        .then(handleAccountsChanged)
        .catch((err) => {
        if (err.code === 4001) {
            // EIP-1193 userRejectedRequest error
            // If this happens, the user rejected the connection request.
            console.log('Please connect to MetaMask.');
            $('#status').html('You refused to connect Metamask')
  
        } else {
            console.error(err);
        }
        });
    }
  
    function detectMetaMask() {
        if (typeof window.ethereum !== 'undefined') {
            return true
        } else {
            return false
        }
    }
  
    async function getValue() {
        console.log('GetValue')
        const contractFirst = new web3.eth.Contract(
                    contractABI,
                    contactAddress
        );
  
        console.log(contractFirst.methods)
        contractFirst.methods.saleIsActive().call().then(function (result) {                
            console.log(result)
            if (result==true) {
              console.log("was true");
            } else {
              console.log("was false");
            }
        });
    }
  
    async function getMinted() {
        console.log('GetValue')
        const contractFirst = new web3.eth.Contract(
                    contractABI,
                    contactAddress
        );
  
        contractFirst.methods.totalSupply().call().then(function (result) {                
            $(".mintedAmount").html(result)
        });
    }
  
    async function setValue() {
        console.log('Set Value')
  
        input_value = $('#value').val()
  
        let sendValue=0;
        if (input_value == '1') {
          sendValue=88880000000000000;
        } else if (input_value == '2') {
          sendValue=177760000000000000;
        } else if (input_value == '3') {
          sendValue=266640000000000000;
        } else if (input_value == '4') {
          sendValue=355520000000000000;
        } else if (input_value == '5') {
          sendValue=444400000000000000;
        } else if (input_value == '6') {
          sendValue=533280000000000000;
        } else if (input_value == '7') {
          sendValue=622160000000000000;
        } else if (input_value == '8') {
          sendValue=711040000000000000;
        }
  
        if(input_value.trim() == '') {
            input_value = 0
        }
        if(!isNaN(input_value)) {
            input_value = parseInt(input_value)
        }
  
        console.log(contractABI);
        console.log(contactAddress)
  
        const contractFirst = new web3.eth.Contract(
                    contractABI,
                    contactAddress
        );
        
        contractFirst.methods.mintBit(input_value).send({from:currentAccount,value:sendValue}).then(function (result) {
            console.log(result);
            // $('#getValue').html(input_value)
        });
  
    }
  
  
    async function mintMax() {
  
        input_value = 8;
        
        const contractFirst = new web3.eth.Contract(
                    contractABI,
                    contactAddress
        );
        
        contractFirst.methods.mintBit(input_value).send({from:currentAccount,value:711040000000000000}).then(function (result) {
            console.log(result);
            // $('#getValue').html(input_value)
        });
  
    }
  </script>
  <script>
    $.getJSON('https://api.etherscan.io/api?module=contract&action=getabi&address=0xaae71bbbaa359be0d81d5cbc9b1e88a8b7c58a94&apikey=8FRMKXU5HPJZU9UF8X5UMRR4D2S41XXSUV', function (data) {
          contractABI = JSON.parse(data.result);
          if (contractABI != ''){
              // var MyContract = web3.eth.contract(contractABI);
              // var myContractInstance = MyContract.at("0x87ed28e903cad56eb86449fa1df3f462e12d73a5");
              // var result = myContractInstance.memberId("0xfe8ad7dd2f564a877cc23feea6c0a9cc2e783715");
              // console.log("result1 : " + result);            
              // var result = myContractInstance.members(1);
              // console.log("result2 : " + result);
              console.log(contractABI);
              //Fetch Value from Smart Contract
              getValue()
          } else {
              console.log("Error" );
          }
      });
  
    $( document ).ready(function() {
        m = detectMetaMask()
        if(m) {
            $('#metaicon').removeClass('meta-gray')
            $('#metaicon').addClass('meta-normal')
            $('#enableMetamask').attr('disabled',false)
            connect() // Make sure the connected wallet is being returned          
        } else {
            $('#enableMetamask').attr('disabled',true)
            $('#metaicon').removeClass('meta-normal')
            $('#metaicon').addClass('meta-gray')
        }
  
        $('#enableMetamask').click(function() {
            connect()
        });
  
        $('#setValue').click(function() {
            setValue()
        });
  
        $('#mintMax').click(function() {
            mintMax()
        });      
  
        setInterval(function(){ 
          getValue()
          getMinted()
        }, 5000);
  
        // try {
        //     web3 = new Web3(new Web3.providers.HttpProvider(window.ethereum));
        // } catch (error) {
        //     console.log(error);
        //     alert(error)
        // }
  
        $("input[type='text'][name='quantity']").change(function() {
            if ($(this).val() > 9) {
                alert("Value must not be greater 8");
                $(this).val('');
                $(this).focus();
            }        
        });    
  
    })
  
    
    
  </script>
  
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
      <script>window.jQuery || document.write('<script src="/docs/4.3/assets/js/vendor/jquery-slim.min.js"><\/script>')</script><script src="/docs/4.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-xrRywqdh3PHs8keKZN+8zzc5TX0GRTLCcmivcbNJWm2rs5C8PRhcEn3czEjhAO9o" crossorigin="anonymous"></script></body>
      
</html>
